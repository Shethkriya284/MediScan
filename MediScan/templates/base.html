<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediScan - AI Healthcare Assistant</title>
    <!-- Fonts (Local Fallback) -->
    <style>
        body {
            font-family: 'Inter', 'Outfit', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        }
    </style>
    <!-- CSS -->
    <link href="{{ url_for('static', filename='vendor/bootstrap/bootstrap.min.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v=23">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/preloader.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/booking.css') }}">

    <!-- Icons -->
    <link href="{{ url_for('static', filename='vendor/font-awesome/all.min.css') }}" rel="stylesheet">
</head>

<body>

    <!-- Preloader -->
    <div id="preloader">
        <div class="loader-content">
            <img src="{{ url_for('static', filename='logo.jpeg') }}" alt="MediScan Logo" class="preloader-logo">
            <h2>MediScan</h2>
        </div>
    </div>

    <!-- Green gradient accent line removed, moved to navbar -->

    <nav class="navbar navbar-expand-lg navbar-dark shadow-sm fixed-top"
        style="background: linear-gradient(135deg, #2E8B57 0%, #247a4a 100%);">
        <div class="container-fluid px-3">
            <!-- Back Button -->
            <!-- Back Button (Visible on all pages except Home) -->
            {% if request.endpoint != 'index' %}
            <button onclick="history.back()" class="btn btn-link text-white p-0 me-3 d-flex align-items-center"
                style="font-size: 1.2rem; opacity: 0.9; min-width: 32px; transition: transform 0.2s;"
                onmouseover="this.style.transform='translateX(-3px)'" onmouseout="this.style.transform='translateX(0)'"
                title="Go Back">
                <i class="fas fa-arrow-left"></i>
            </button>
            {% endif %}

            <a href="{{ url_for('index') }}" class="navbar-brand d-flex align-items-center gap-2 me-auto">
                <img src="{{ url_for('static', filename='logo.jpeg') }}" alt="Logo"
                    style="height: 34px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.4);">
                <span
                    style="color: white; font-weight: 700; font-size: 1.15rem; letter-spacing: -0.3px;">MediScan</span>
            </a>

            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarContent">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-center" style="gap: 2rem;">
                    <li class="nav-item">
                        <a class="nav-link nav-link-custom {{ 'active' if request.endpoint == 'index' }}"
                            href="{{ url_for('index') }}">
                            Home
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link nav-link-custom dropdown-toggle {{ 'active' if request.endpoint in ['medicine_tracker', 'lab_analysis', 'medicines', 'doctors', 'health_tracker', 'dependents'] }}"
                            href="#" id="servicesDropdown" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Services <i class="fas fa-chevron-down ms-1" style="font-size: 0.8em;"></i>
                        </a>
                        <ul class="dropdown-menu border-0 shadow-lg" aria-labelledby="servicesDropdown"
                            style="border-radius: 12px; overflow: hidden; min-width: 240px;">
                            <li><a class="dropdown-item py-2" href="{{ url_for('medicine_tracker') }}"><i
                                        class="fas fa-pills me-2 text-primary"></i>Medicine Tracker</a></li>
                            <li><a class="dropdown-item py-2" href="{{ url_for('lab_analysis') }}"><i
                                        class="fas fa-flask me-2 text-primary"></i>Lab Analysis</a></li>
                            <li><a class="dropdown-item py-2" href="{{ url_for('medicines') }}"><i
                                        class="fas fa-capsules me-2 text-primary"></i>Medicines</a></li>
                            <li>
                                <hr class="dropdown-divider my-1">
                            </li>
                            <li><a class="dropdown-item py-2" href="{{ url_for('doctors') }}"><i
                                        class="fas fa-user-md me-2 text-primary"></i>Find Doctors</a></li>
                            <li><a class="dropdown-item py-2" href="{{ url_for('doctors') }}"><i
                                        class="fas fa-calendar-plus me-2 text-primary"></i>Book Appointment</a></li>
                            <li>
                                <hr class="dropdown-divider my-1">
                            </li>
                            <li><a class="dropdown-item py-2" href="{{ url_for('health_tracker') }}"><i
                                        class="fas fa-chart-bar me-2 text-primary"></i>Health Analytics</a></li>
                            <li><a class="dropdown-item py-2" href="{{ url_for('dependents') }}"><i
                                        class="fas fa-users me-2 text-primary"></i>Family Health</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-link-custom {{ 'active' if request.endpoint == 'about' }}"
                            href="{{ url_for('about') }}">
                            About
                        </a>
                    </li>
                    {% if current_user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link nav-link-custom {{ 'active' if request.endpoint in ['dashboard', 'patient_dashboard'] }}"
                            href="{{ url_for('patient_dashboard') }}">
                            Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-link-custom {{ 'active' if request.endpoint == 'profile' }}"
                            href="{{ url_for('profile') }}">
                            <i class="fas fa-user-circle me-1"></i>Profile
                        </a>
                    </li>
                    <li class="nav-item ms-lg-3">
                        <a href="{{ url_for('logout') }}" class="nav-auth-btn nav-logout-btn"
                            style="background: #dc2626 !important; color: #ffffff !important; border: none; padding: 0.45rem 1.2rem; border-radius: 8px; font-weight: 600; font-size: 0.9rem; text-decoration: none; display: inline-flex; align-items: center; transition: background 0.2s;"
                            onmouseover="this.style.background='#b91c1c'" onmouseout="this.style.background='#dc2626'">
                            <i class="fas fa-sign-out-alt me-1"></i>Logout
                        </a>
                    </li>
                    {% else %}
                    <li class="nav-item ms-lg-2">
                        <a href="{{ url_for('auth') }}" class="nav-auth-btn nav-login-btn">
                            <i class="fas fa-sign-in-alt me-1"></i>Login
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
        <!-- Bottom Gradient Line -->
        <div
            style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: linear-gradient(90deg, #16a34a 0%, #4ade80 40%, #bbf7d0 60%, #4ade80 80%, #16a34a 100%);">
        </div>
    </nav>



    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="container mt-3" style="position: relative; z-index: 1100;">
        {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show shadow-sm" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    {% endwith %}
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-logo-section">
                <a href="{{ url_for('index') }}" class="footer-brand">
                    <img src="{{ url_for('static', filename='logo.jpeg') }}" alt="MediScan Logo" class="footer-logo">
                    <span>MediScan</span>
                </a>
                <p class="footer-description">
                    Empowering healthcare with intelligence. Your trusted AI companion for better health decisions.
                </p>
                <div class="social-links">
                    <!-- Facebook Removed -->
                    <a href="javascript:void(0)" class="social-icon"
                        onclick="openSocialModal('{{ url_for('static', filename='social_modals/instagram.jpg') }}', 'Twitter')"><i
                            class="fab fa-twitter"></i></a>
                    <a href="javascript:void(0)" class="social-icon"
                        onclick="openSocialModal('{{ url_for('static', filename='social_modals/linkedin.jpeg') }}', 'LinkedIn')"><i
                            class="fab fa-linkedin-in"></i></a>
                    <a href="javascript:void(0)" class="social-icon"
                        onclick="openSocialModal('{{ url_for('static', filename='social_modals/twitter.jpg') }}', 'Instagram')"><i
                            class="fab fa-instagram"></i></a>
                </div>
            </div>

            <div class="footer-links-section">
                <div class="footer-column">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="{{ url_for('index') }}">Home</a></li>
                        <li><a href="{{ url_for('about') }}">Who We Are</a></li>
                        <li><a href="{{ url_for('doctors') }}">Find Doctors</a></li>
                        <li><a href="{{ url_for('health_analytics') }}">Health Analytics</a></li>

                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="{{ url_for('privacy') }}">Privacy Policy</a></li>
                        <li><a href="{{ url_for('terms') }}">Terms & Conditions</a></li>
                        <!-- Removed Cookie Policy and Disclaimer as requested -->
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Contact Us</h4>
                    <ul class="contact-info">
                        <li><i class="fas fa-map-marker-alt"></i> 123 Health Street, MedCity</li>
                        <li><i class="fas fa-phone"></i> +1 234 567 8900</li>
                        <li><i class="fas fa-envelope"></i> support@mediscan.ai</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 MediScan AI. All rights reserved.</p>
        </div>
    </footer>

    <!-- Social Media Modal -->
    <div class="modal fade" id="socialModal" tabindex="-1" aria-labelledby="socialModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content" style="background-color: transparent; border: none;">
                <div class="modal-body p-0 position-relative text-center">
                    <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3"
                        data-bs-dismiss="modal" aria-label="Close"
                        style="z-index: 1050; background-color: white; opacity: 0.8;"></button>
                    <img id="socialModalImage" src="" alt="Social Media" class="img-fluid rounded shadow-lg"
                        style="max-height: 85vh; width: auto; object-fit: contain;">
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='vendor/bootstrap/bootstrap.bundle.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        function openSocialModal(imageSrc, platformName) {
            const modal = new bootstrap.Modal(document.getElementById('socialModal'));
            const imgElement = document.getElementById('socialModalImage');
            imgElement.src = imageSrc;
            imgElement.alt = platformName + " Preview";
            modal.show();
        }
    </script>
    {% block extra_js %}{% endblock %}


</body>

</html>