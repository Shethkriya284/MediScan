{% extends "base.html" %}

{% block content %}
<div class="container" style="padding: 2rem 1rem; max-width: 900px; margin: 0 auto;">

    <!-- Search Header -->
    <div style="margin-bottom: 2rem;">
        <h2 style="font-size: 1.8rem; font-weight: 700; color: #1a1a2e; margin-bottom: 0.5rem;">
            Search Results for "{{ query }}"
        </h2>
        <p style="color: #666;">Found {{ total_results }} result{% if total_results != 1 %}s{% endif %}</p>
    </div>

    <!-- No Results -->
    {% if total_results == 0 %}
    <div
        style="text-align: center; padding: 3rem; background: #f8f9fa; border-radius: 12px; border: 1px dashed #ced4da;">
        <i class="fas fa-search" style="font-size: 3rem; color: #adb5bd; margin-bottom: 1rem;"></i>
        <h3 style="color: #495057;">No results found</h3>
        <p style="color: #6c757d;">Try adjusting your search terms or check for typos.</p>
        <div style="margin-top: 1.5rem;">
            <a href="{{ url_for('doctors') }}" class="btn btn-outline-primary me-2">Browse Doctors</a>
            <a href="{{ url_for('medicines') }}" class="btn btn-outline-primary">Browse Medicines</a>
        </div>
    </div>
    {% endif %}

    <!-- Services Results -->
    {% if results.services %}
    <div style="margin-bottom: 2.5rem;">
        <h3
            style="font-size: 1.2rem; color: #2E8B57; border-bottom: 2px solid #e9ecef; padding-bottom: 0.5rem; margin-bottom: 1rem;">
            <i class="fas fa-magic me-2"></i>Services & Tools
        </h3>
        <div class="list-group">
            {% for service in results.services %}
            <a href="{{ service.url }}"
                class="list-group-item list-group-item-action p-3 border-0 shadow-sm mb-2 rounded"
                style="transition: transform 0.2s;">
                <div class="d-flex w-100 justify-content-between align-items-center">
                    <h5 class="mb-1 text-primary">{{ service.name }}</h5>
                    <small class="text-muted"><i class="fas fa-chevron-right"></i></small>
                </div>
                <p class="mb-1 text-secondary">{{ service.description }}</p>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- Doctors Results -->
    {% if results.doctors %}
    <div style="margin-bottom: 2.5rem;">
        <h3
            style="font-size: 1.2rem; color: #2E8B57; border-bottom: 2px solid #e9ecef; padding-bottom: 0.5rem; margin-bottom: 1rem;">
            <i class="fas fa-user-md me-2"></i>Doctors
        </h3>
        {% for doctor in results.doctors %}
        <div class="card mb-3 border-0 shadow-sm" style="transition: all 0.2s; overflow: hidden;">
            <div class="card-body p-3 d-flex align-items-center gap-3">
                <div
                    style="width: 60px; height: 60px; background: #e2e8f0; border-radius: 50%; display: flex; align-items: center; justify-content: center; overflow: hidden; flex-shrink: 0;">
                    {% if doctor.image_url %}
                    <img src="{{ doctor.image_url }}" alt="{{ doctor.user.username }}"
                        style="width: 100%; height: 100%; object-fit: cover;">
                    {% else %}
                    <i class="fa-solid fa-user-doctor text-secondary" style="font-size: 1.5rem;"></i>
                    {% endif %}
                </div>
                <div style="flex: 1;">
                    <h5 class="card-title mb-1">
                        <a href="{{ url_for('book_appointment', doctor_id=doctor.id) }}"
                            style="text-decoration: none; color: #1a1a2e; font-weight: 600;">{{ doctor.user.username
                            }}</a>
                    </h5>
                    <h6 class="card-subtitle mb-2 text-primary">{{ doctor.specialization }}</h6>
                    <p class="card-text small text-muted mb-0"><i class="fas fa-hospital me-1"></i> {{ doctor.hospital
                        }}</p>
                </div>
                <a href="{{ url_for('book_appointment', doctor_id=doctor.id) }}"
                    class="btn btn-sm btn-outline-success rounded-pill px-3">Book</a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Medicine Results -->
    {% if results.medicines %}
    <div style="margin-bottom: 2.5rem;">
        <h3
            style="font-size: 1.2rem; color: #2E8B57; border-bottom: 2px solid #e9ecef; padding-bottom: 0.5rem; margin-bottom: 1rem;">
            <i class="fas fa-pills me-2"></i>Medicines
        </h3>
        {% for med in results.medicines %}
        <div class="card mb-3 border-0 shadow-sm">
            <div class="card-body p-3">
                <h5 class="card-title text-dark fw-bold">{{ med.name }}</h5>
                <p class="card-text text-muted small mb-2">{{ med.usage }}</p>
                <a href="{{ url_for('medicines') }}?q={{ med.name }}" class="text-primary small"
                    style="text-decoration: none;">View Details &rarr;</a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

</div>

<style>
    .list-group-item:hover {
        background-color: #f8f9fa;
        transform: translateX(5px);
    }

    .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
    }
</style>
{% endblock %}